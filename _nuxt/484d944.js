(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{522:function(t,e,n){var content=n(670);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(19).default)("ffde1c60",content,!0,{sourceMap:!1})},669:function(t,e,n){"use strict";n(522)},670:function(t,e,n){var o=n(18)(!1);o.push([t.i,".msg-content{height:400px;overflow-y:auto}.msg-bubble-wrap{width:100%;overflow:hidden}.msg-bubble{float:right;padding:5px 10px;min-width:20%;max-width:80%;margin:10px 15px;border:2px solid #fff}.msg-bubble.admin{float:left;background:#fff;color:#000}.msg-control{padding:0 15px}.msg-control textarea{border-radius:0;border:2px solid #fff;background:#000;color:#fff}.msg-control button{background:#fff;border-radius:0}.msg-control button.btn-outline{background:#000;color:#fff}",""]),t.exports=o},693:function(t,e,n){"use strict";n.r(e);n(2),n(22),n(63),n(40),n(17),n(41),n(74);var o={data:function(){return{message:[],form:{name:"No Name",message:"",secret:"",is_admin:0},curYear:2021,disabledSend:!1,sendCountdown:11,initSendCountdown:11}},mounted:function(){this.initialize()},methods:{initialize:function(){var t=this,e=new Date;if(this.curYear=e.getFullYear(),this.form.message="",navigator.onLine){var n=[];this.$store.dispatch("message/fetchMessage").then((function(e){e.forEach((function(t){n.push({id:t.id,name:t.data().name,message:t.data().message,created_at:t.data().created_at,is_admin:t.data().is_admin,is_deleted:t.data().is_deleted})})),t.messageDataFormatting(n)}))}if(localStorage.user){var o=JSON.parse(localStorage.getItem("user"));this.form.name=o.name,this.form.secret=this.$decrypt(o.secret)}},messageDataFormatting:function(t){var e=this,n=[],o=[],r="",m="",d="";t.forEach((function(t){t.time=e.$dateFormat(t.created_at,"object"),r=t.time.day,m=t.time.month,d=t.time.year;var l=r+"_"+m+"_"+d;""===r&&""===m&&""===d&&(o.push(l),n.push({id:l,day:r,month:m,year:d,data:[]})),o.includes(l)||(o.push(l),n.push({id:l,day:r,month:m,year:d,data:[]}))})),n.forEach((function(e){var data=[];t.forEach((function(t){t.time.day===e.day&&t.time.month===e.month&&t.time.year===e.year&&data.push(t)})),e.data=data})),this.message=n,this.scrollToBottom()},setName:function(){this.form.name.length>15&&(this.form.name=this.form.name.substr(15)),""===this.form.name&&(this.form.name="No Name"),"Jhonarendra"===this.form.name&&this.$bvModal.show("modalAdmin");var t={name:this.form.name,secret:this.$decrypt(this.form.secret)};localStorage.setItem("user",JSON.stringify(t)),this.$bvModal.hide("modalProfil")},setSecret:function(){this.form.secret!==this.$decrypt("ABSBIgMBOgKIV")&&(this.form.is_admin=0,this.form.name="No Name",this.form.secret="");var t={name:this.form.name,secret:this.$encrypt(this.form.secret)};localStorage.setItem("user",JSON.stringify(t)),this.$bvModal.hide("modalAdmin")},sendMessage:function(){var t=this;if("Jhonarendra"===this.form.name&&this.form.secret===this.$decrypt("ABSBIgMBOgKIV")?this.form.is_admin=1:"Jhonarendra"===this.form.name&&this.form.secret!==this.$decrypt("ABSBIgMBOgKIV")&&(this.form.is_admin=0,this.form.name="No Name",this.form.secret=""),""===this.form.message)return!1;if(this.disabledSend)return!1;if(!navigator.onLine)return!1;var e=this.getDeviceInformation(),n={name:this.form.name,message:this.form.message,is_admin:this.form.is_admin,is_deleted:0,created_at:this.$dateFormat("now","datetime"),device:e.browserName+"|"+e.fullVersion+"|"+e.osName};this.$store.dispatch("message/sendMessage",n).then((function(e){t.initialize(),t.setCountdown()}))},setCountdown:function(){var t=this;this.disabledSend=!0;for(var i=0;i<this.initSendCountdown;i++)setTimeout((function(){t.sendCountdown-=1,0===t.sendCountdown&&(t.disabledSend=!1,t.sendCountdown=t.initSendCountdown)}),1e3*i)},secondToMinute:function(s){var t="",e=0;return s>=60?(1===(e=s%60).toString().length&&(e="0"+e),t=parseInt(s/60)+":"+e):(s<60||1===s.toString().length&&(s="0"+s),t=s),t},scrollToBottom:function(){setTimeout((function(){document.getElementById("msg-content").scroll({top:document.getElementById("msg-content").scrollHeight,behavior:"smooth"})}),500)},getDeviceInformation:function(){var t,e,n,o=navigator.userAgent,r=navigator.appName,m=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10);-1!==(e=o.indexOf("Opera"))?(r="Opera",m=o.substring(e+6),-1!==(e=o.indexOf("Version"))&&(m=o.substring(e+8))):-1!==(e=o.indexOf("MSIE"))?(r="Microsoft Internet Explorer",m=o.substring(e+5)):-1!==(e=o.indexOf("Chrome"))?(r="Chrome",m=o.substring(e+7)):-1!==(e=o.indexOf("Safari"))?(r="Safari",m=o.substring(e+7),-1!==(e=o.includes("Version"))&&(m=o.substring(e+8))):-1!==(e=o.indexOf("Firefox"))?(r="Firefox",m=o.substring(e+8)):(t=o.lastIndexOf(" ")+1)<(e=o.lastIndexOf("/"))&&(r=o.substring(t,e),m=o.substring(e+1),r.toLowerCase()===r.toUpperCase()&&(r=navigator.appName)),-1!==(n=m.indexOf(";"))&&(m=m.substring(0,n)),-1!==(n=m.indexOf(" "))&&(m=m.substring(0,n)),d=parseInt(""+m,10),isNaN(d)&&(m=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10));var l="Unknown OS";return navigator.appVersion.includes("Win")&&(l="Windows"),navigator.appVersion.includes("Mac")&&(l="MacOS"),navigator.appVersion.includes("X11")&&(l="UNIX"),navigator.appVersion.includes("Linux")&&(l="Linux"),{browserName:r,fullVersion:m,majorVersion:d,appName:navigator.appName,userAgent:navigator.userAgent,osName:l}}}},r=(n(669),n(39)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msg-content-wrapper mt-3"},[0!==t.message.length?n("div",{staticClass:"msg-content",attrs:{id:"msg-content"}},t._l(t.message,(function(e){return n("div",{key:e.id},[n("p",{staticClass:"text-center mb-1 mt-3"},[t._v("\n        "+t._s(e.month+" "+e.day)+"\n        "+t._s(parseInt(e.year)===parseInt(t.curYear)?"":", "+e.year)+"\n      ")]),t._v(" "),t._l(e.data,(function(e){return n("div",{key:e.id,staticClass:"msg-bubble-wrap"},[n("div",{staticClass:"msg-bubble",class:e.is_admin?"admin":""},[n("p",{staticClass:"mb-1"},[n("small",[t._v(t._s(e.name))])]),t._v(" "),n("p",{staticClass:"mb-0"},[t._v("\n            "+t._s(e.message)+"\n          ")]),t._v(" "),n("p",{staticClass:"text-right mb-0"},[n("small",[t._v(t._s(e.time.hour+":"+e.time.minute))])])])])}))],2)})),0):n("div",[t._m(0)]),t._v(" "),n("hr",{staticStyle:{background:"white","border-width":"2px"}}),t._v(" "),n("div",{staticClass:"msg-control"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-9"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{placeholder:"Message",maxlength:"100"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}}),t._v(" "),n("p",{staticClass:"text-right mb-0"},[n("small",[t._v(t._s(100-t.form.message.length))])])]),t._v(" "),n("div",{staticClass:"col-3"},[n("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalProfil",modifiers:{modalProfil:!0}}],staticClass:"btn btn-sm btn-block btn-outline"},[t._v("\n          "+t._s(t.form.name)+"\n        ")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-block",attrs:{disabled:t.disabledSend},on:{click:t.sendMessage}},[t._v("\n          Send "+t._s(0!==t.sendCountdown&&t.disabledSend?t.secondToMinute(t.sendCountdown):"")+"\n        ")])])])]),t._v(" "),n("b-modal",{attrs:{id:"modalProfil",title:"Profil","hide-footer":""}},[n("label",[t._v("Name")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control jon-form",attrs:{type:"text",maxlength:"15"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),n("p",{staticClass:"text-right mb-0"},[n("small",[t._v(t._s(15-t.form.name.length))])]),t._v(" "),n("p",{staticClass:"text-center mt-3 mb-0"},[n("a",{staticClass:"btn btn-sm btn-black",on:{click:t.setName}},[t._v("OK")])])]),t._v(" "),n("b-modal",{attrs:{id:"modalAdmin","hide-footer":"","hide-header":""}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.secret,expression:"form.secret"}],staticClass:"form-control jon-form",attrs:{type:"text"},domProps:{value:t.form.secret},on:{input:function(e){e.target.composing||t.$set(t.form,"secret",e.target.value)}}}),t._v(" "),n("p",{staticClass:"text-center mt-3 mb-0"},[n("a",{staticClass:"btn btn-sm btn-black",on:{click:t.setSecret}},[t._v("OK")])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-center"},[e("i",{staticClass:"fa fa-spinner fa-spin"})])}],!1,null,null,null);e.default=component.exports}}]);